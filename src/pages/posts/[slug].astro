---
import BaseLayout from "../../layouts/BaseLayout.astro";
import { getCollection } from "astro:content";

export async function getStaticPaths() {
  const posts = await getCollection("posts");
  return posts.map((post) => ({
    params: { slug: post.slug },
    props: { post },
  }));
}

const { post } = Astro.props;
const { title, date, tags, coverImage } = post.data;
---

<BaseLayout title={`${title} · Grumpy Pickleballer`}>
  <article>
    <header class="hero">
      <h1>{title}</h1>
      <p>
        <time>{date}</time>
        {tags && tags.length > 0 && (
          <>
            {" · "}
            {tags.join(", ")}
          </>
        )}
      </p>
      {coverImage && <img src={coverImage} alt={title} style="max-width: 100%; border-radius: 1rem; margin-top: 1rem;" />}
    </header>

    <section class="post-body">
      <post.Content />
    </section>
  </article>
</BaseLayout>